{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JoBot - Modo Entrevista</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- CSS con Django -->
    <link rel="stylesheet" href="{% static 'css/interview.css' %}">
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-light bg-white border-bottom px-4 py-3 d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center">
            <img src="{% static 'img/logo.png' %}" alt="JoBot Logo" height="50" class="me-2">
            <span class="fs-5 fw-normal">JoBot</span>
        </div>
        <div>
            <button class="btn btn-outline-dark me-3">Inicio</button>
            <button class="btn btn-info text-dark fw-normal">Cerrar sesión</button>
        </div>
    </nav>

    <!-- Layout principal -->
    <div class="d-flex">
        <!-- Aside -->
        <aside class="sidebar p-4">
            <h6 class="fw-semibold mb-3">Entrevista</h6>
            <ul class="list-group mb-4">
                <li class="list-group-item">Entrevista 1</li>
                <li class="list-group-item">Entrevista 2</li>
                <li class="list-group-item">Entrevista 3</li>
                <li class="list-group-item">Entrevista 4</li>
                <li class="list-group-item">Entrevista 5</li>
            </ul>

            <h6 class="fw-semibold mb-3">Racha</h6>
            <div class="calendar-box mb-3 text-center">
                <!-- aquí reemplazamos el placeholder estático por el container dinámico -->
                <div id="streak-calendar" class="streak-calendar"></div>
            </div>

            <div class="text-center mt-4">
                <img src="{% static 'img/fire.png' %}" alt="fire icon" height="45">
                <p class="mb-0 text-muted">n DÍAS</p>
            </div>
        </aside>

        <!-- Chat -->
        <main class="chat p-4 flex-grow-1">
            <div class="chat-messages">
                <div class="message bot">
                    <p class="fw-semibold mb-1">JoBot</p>
                    <p>Text</p>
                </div>
                <div class="message user">
                    <p class="fw-semibold mb-1">Tú</p>
                    <p>Text</p>
                </div>
            </div>

            <div class="chat-input">
                <input type="text" class="form-control input-chat" placeholder="Mensaje para JoBot">
            </div>
        </main>
    </div>

    <!-- si desde la view Django pasas 'streak_dates_json' (json.dumps), lo inyectamos para que interview.js lo use -->
    {% if streak_dates_json %}
    <script>
      window.initialStreak = ["2025-10-03", "2025-10-04", "2025-10-06"];
    </script>
    {% endif %}

    <!-- script actual para activar la selección de entrevistas -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.list-group-item').forEach(i => i.classList.remove('active'));
            document.querySelectorAll('.list-group-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.list-group-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        });
    </script>

    <!-- carga el JS del calendario -->
    <script src="{% static 'js/interview.js' %}" defer></script>
</body>
</html>
